# Cache (캐시)
### 정의
- 웹페이지, 이미지, 스크립트 등의 웹 콘텐츠를 임시로 저장하는 기술

### 목적
- 웹 페이지 로딩 속도 향상
- 서버 부하 감소
- 대역폭 사용량 절약

### 종류
- 브라우저 캐시 : 사용자의 웹 브라우저에 저장
- 프록시 캐시 : 네트워크 상 중간 서버에 저장
- CDN (Content Delivery Network) : 전 세계에 분산된 서버에 콘텐츠 저장

### 캐시 제어
- HTTP 헤더를 통한 제어 (Cache-Control, ETag)
- 캐시 수명, 유효성 검사 등을 설정 

### 단점
- 오래된 컨텐츠 표시가 될 수 있음
- 동적 콘텐츠에는 적합하지 않을 수 있음

## Cache 보안
- 민감한 정보 노출
    - 개인정보, 금융 데이터 등 민감한 정보가 캐시에 저장될 수 있음, 이후 캐시에 무단 접근 시 해당 정보가 노출될 가능성 존재.
- 캐시 포이즈닝 
    - 공격자가 악의적인 컨텐츠를 캐시에 주입할 수 있음.
- 오래된 캐시
    - 업데이트 및 보안 패치가 적용되지 않을 수 있음.
- 공유 캐시 위험성
    - 여러 사용자가 동일한 캐시를 공유할 때 정보 유출 위험 존재.


# Cookie (쿠키)
- 웹 사이트가 사용자의 브라우저에 저장하는 텍스트 파일 

### 목적
- 사용자 세션 관리
- 개인화된 사용자 경험 제공
- 사용자 행동 추적 및 분석

### 종류
- 세션 쿠키 : 브라우저 종료 시 삭제
- 영구 쿠키 : 지정된 만료일까지 유지
- 퍼스트 파티 쿠키 : 방문 중인 웹사이트에서 생성
- 서드 파티 쿠키 : 다른 도메인에서 생성 (주로 광고 목적)

### 작동 방식
- 서버가 Set-Cookie HTTP 헤더를 통해 쿠키 생성 요청
- 브라우저가 쿠키 저장
- 이후 요청 시 Cookie 헤더에 포함하여 서버로 전송

### 쿠키 속성
- Domain : 쿠키가 전송될 도메인 지정
- Path : 쿠키가 유효한 경로 지정
- Expires/Max-Age : 쿠키 만료 시간 설정
- Secure : HTTPS 연결에서만 전송
- HttpOnly : JavaScript를 통한 접근 방지

### 장점 
- 상태 유지 가능 (로그인 상태 등)
- 사용자 선호도 저장
- 장바구니 기능 구현 용이

### 단점
- 프라이버시 침해 우려
- 보안 위험 (쿠키 탈취 등)
- 용량 제한 (일반적으로 4kb)

## Cookie 보안
- 세션 하이재킹
    - 공격자가 유효한 세션 쿠키 탈취 가능
    - 탈취한 쿠키를 이용하여 사용자로 위장 가능
    - Secure 플래그 사용으로 HTTPS만 쿠키 전송
    - HttpOnly 플래그로 JavaScript를 통한 쿠키 접근 차단

- 크로스 사이트 스크립팅 (XSS)
    - 웹 앱의 취약점을 이용하어 사용자의 브라우저에 악성 스크립트 주입
        
        1. Stored XSS : 악성 스크립트가 서버에 저장되어 다른 사용자가 해당 페이지를 열 때 실행
        2. Reflected XSS : 사용자의 입력이 서버에서 즉시 응답으로 반환되어 실행 (Injection과 유사)
    - 악성 스크립트가 웹 페이지에 주입되 실행 가능
    - 주입된 스크립트가 사용자의 쿠키를 탈취하거나 조작 가능

- 크로스 사이트 요청 위조 (CSRF)
    - 악성 웹사이트로 방문 유도 후 원래 웹사이트로 요청을 보내 인증 쿠키를 탈취하는 방법
    - 사용자가 자신의 의지와 무관하게 공격자가 의도한 행동을 수행함
    - 공격자가 사용자의 권한으로 원하지 않는 작업 수행 가능
    - 중요 작업에 대한 재인증 요구
    - Referer 검사
    - CSRF 토큰 사용 : 각 요청마다 고유한 토큰 생성 및 검증

- 쿠키 스니핑
    - 네트워크 상에서 쿠키 정보 탈취 가능
    - 모든 통신에 HTTPS 사용
    - 중요 정보는 서버 세션에 저장하고 세선 ID만 쿠키로 전송

- 쿠키 조작
    - 클라이언트 측에서 쿠키 값 임의 변경 가능
    - 권한 상승, 인증 우회 등이 가능함.
    - 서버 측에서 쿠키 값 검증
    - 쿠키 값에 대한 디지털 서명 적용 

- 영구 쿠키
    - 쿠키 탈취 등의 문제 발생 시 장기간 악용 가능
    - 만료 기간 짧게 설정

|제목 셀1|Cache|Cookie|
|---|---|---|
|정의|웹페이지의 요소를 저장하기 위한 임시 저장소.(그림 및 문서 파일 등)|정보를 저장하기 위해 사용. 웹 서버에서 PC로 보내는 작은 파일들을 저장. 특정 웹사이트를 특정 유저가 접속할 때 발생함|
|목적|웹페이지가 빠르게 렌더링 할 수 있도록 도움|사용자 인증 도움|
|삭제|사용자가 직접 수동으로 삭제|만료기간이 있어 시간이 지나면 자동 삭제|
|예시|오디오, 비디오 파일 등|우저의 선호도 (로그인 정보, 방문 기록, 방문 횟수 등)|