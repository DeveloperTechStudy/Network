# 리다이렉션?

![image.png](image.png)

## 리다이렉션

- 요청을 완수하기 위해 추가적인 조치가 필요한 상태
- 클라이언트가 요청한 자원이 다른 곳에 있을 때, 클라이언트의 요청을 다른 곳으로 이동시키는 것
    
    → 웹 브라우저가 특정한 URL을 서버에 요청했을 때, 사전에 **지정된 URL로 재요청**할 것을 지시받는 것을 의미
    

## 영구 리다이렉션 : 301, 308

**[예시 상황]**

1. 도메인 변경 : 회사의 재정비로 웹 사이트 도메인을 변경한 경우
2. 페이지 구조 변경 : 웹사이트의 콘텐츠 구조가 변경되었을 때 - 블로그 포스트의 경로가 변경되었을 때

**[상태 코드]**

- **301 Moved Permanently** : 요청한 자원의 URL가 영구적으로 이동됨. 요청 메서드가 GET으로 변경됨, 본문이 제거될 수 있음
- **308 Permanent Redirect** :  리다이렉트 시 요청 메서드와 본문 유지

### 🤷🏻 요청 메서드가 바뀌는 이유?

- 웹 브라우저의 기본 동작과 보안 및 효율성 때문
- 특히 301 리다이렉션에서 POST → GET 바꾸는 이유는
    - GET 요청은 **데이터를 서버에 보내지 않고 리소스를 요청**하는 방식
    - 요청에 사용자의 민감 정보가 포함되었을 때, 중복된 데이터 전송을 방지하기 위해
    
    즉, POST 요청이 다시 전송되는 상황에서 발생하는 데이터 중복 전송, 잠재적 부작용을 막기 위해
    

→ 이런 메서드 변경이 필요 없는 경우 307을 사용하는 것이 적합

## 일시 리다이렉션 : 302, 307, 303

**[예시 상황]**

1. 사이트 점검 중
2. A/B 테스트 :  `http://example.com/product` → `http://example.com/product-test`
다른 페이지로 리다이렉트하여 테스트 진행 → 이후 원래 페이지로 복귀

**[상태 코드]**

- **302 Found** : 리다이렉트시 요청 메서드가 GET으로 변경. 본문이 제거될 수 있다.
- **307 Temporary Redirect :** 요청 메서드와 본문을 유지해야 함
- **303 See Other :** 리다이렉트시 요청 메서드가 GET으로 변경됨

### 🤷🏻 영구가 아닌 일시 리다이렉션을 사용하는 이유?

**예시 상황:** 우유가 품절되어, 품절 안내 페이지로 리다이렉션하려 함.

1. 우유 상세 페이지 → 품절 안내 페이지로 **301 리다이렉션** 설정
2. 클라이언트는 해당 우유 상세 페이지가 *영구적으로 없어졌다고* 인식
3. ***검색 엔진*** 또한 우유 페이지가 아닌 품절 안내 페이지를 랭킹에 반영 
    
    → SEO 가중치(검색 순위에 유리하게 작용하는 요소들)가 떨어져 우유 순위가 떨어질 수 있음
    
    → 재입고가 되어도, 사용자가 우유 페이지 접속하려 할 때 품절 안내 페이지로 리다이렉트될 수 있음
    

따라서 *일시적인 리다이렉션을 사용*해서 클라이언트와 검색 엔진에게도 리다이렉션이 **임시적임**을 알려야 한다.

### 🤷🏻상태 코드 응답?

- 서버 관리자가 서버의 **설정 파일**이나 애플리케이션 **코드**에서 상태 코드의 반환을 설정하고 제어

[Flask를 사용해 리다이렉션을 설정 예시]

```jsx
from flask import Flask, redirect

app = Flask(__name__)

@app.route('/old-page')
def old_page():
    # 301 리다이렉션 반환: 영구적으로 새 페이지로 이동
    return redirect("/new-page", code=301)

@app.route('/new-page')
def new_page():
    return "This is the new page!"
```

---

https://seo.tbwakorea.com/blog/redirect-for-seo/

https://071217.tistory.com/47